(async function() {while (!Spicetify.React || !Spicetify.ReactDOM) {await new Promise(resolve => setTimeout(resolve, 10));}var lucid=(()=>{var Zo=Object.create;var Xe=Object.defineProperty;var qo=Object.getOwnPropertyDescriptor;var Yo=Object.getOwnPropertyNames;var Jo=Object.getPrototypeOf,Xo=Object.prototype.hasOwnProperty;var Ko=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Qo=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Yo(r))!Xo.call(e,n)&&n!==t&&Xe(e,n,{get:()=>r[n],enumerable:!(o=qo(r,n))||o.enumerable});return e};var m=(e,r,t)=>(t=e!=null?Zo(Jo(e)):{},Qo(r||!e||!e.__esModule?Xe(t,"default",{value:e,enumerable:!0}):t,e));var u=Ko((Cn,Ke)=>{Ke.exports=Spicetify.React});var T=m(u()),er=(0,T.memo)(({title:e,children:r,headingChild:t,onClose:o,isOpen:n=!1})=>n?T.default.createElement("div",{className:"modal-container"},T.default.createElement("div",{className:`modal-overlay ${n&&"open"}`,style:{zIndex:20},onClick:o}),T.default.createElement("dialog",{open:n,className:`modal-section ${n&&"open"}`,"aria-label":e,"aria-modal":"true"},T.default.createElement("div",{className:"main-embedWidgetGenerator-container"},T.default.createElement("div",{className:"main-trackCreditsModal-header"},T.default.createElement("h1",{className:"encore-text encore-title-body-medium"},e),t&&T.default.createElement("div",null,t),T.default.createElement("button",{type:"button","aria-label":"Close",className:"main-trackCreditsModal-closeBtn",onClick:()=>o()},T.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},T.default.createElement("title",null,"Close"),T.default.createElement("path",{d:"M31.098 29.794L16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",fill:"currentColor","fill-rule":"evenodd"})))),T.default.createElement("div",{className:"modal-contents"},T.default.createElement("main",{className:"modal-wrapper"},r))))):null),we=er;var me=m(u()),tr=({title:e,description:r,children:t})=>me.default.createElement("div",{className:"setting-section"},me.default.createElement("div",{className:"heading-wrapper"},me.default.createElement("h3",{className:"title encore-text encore-text-title-small"},e),r&&me.default.createElement("p",{className:"desc encore-text encore-text-body-small"},r)),t),V=tr;var Qe=[{label:"Animated",value:"animated"},{label:"Static",value:"static"},{label:"Solid",value:"solid"}],et=[{label:"All elements",value:"full"},{label:"Accent color only",value:"basic"}],tt=[{label:"Compact",value:"compact"},{label:"Default",value:"default"},{label:"Rounded",value:"rounded"}],ot=[{label:"Starry",value:"starry"},{label:"Default",value:"default"},{label:"none",value:"none"}],rt=[{label:"Now Playing",value:"now-playing"},{label:"Playlist Cover",value:"inherit"},{label:"none",value:"none"}],nt=[{label:"Card",value:"card"},{label:"Compact Card",value:"compact-card"},{label:"Compact",value:"compact"},{label:"Default",value:"default"}],it=[{label:"None",value:"none"},{label:"Hidden",value:"hidden"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"},{label:"Solid",value:"solid"},{label:"Double",value:"double"},{label:"Groove",value:"groove"},{label:"Ridge",value:"ridge"},{label:"Inset",value:"inset"},{label:"Outset",value:"outset"}];var at=[{label:"Profile Context Menu",value:"context-menu"},{label:"Global Nav",value:"nav"}],st=[{label:"Compact",value:"compact"},{label:"Normal",value:"normal"}],lt=[{label:"Left",value:"left"},{label:"Right",value:"right"}];var Fe=m(u()),or=()=>Fe.default.createElement("svg",{role:"img","aria-label":"dismiss",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Fe.default.createElement("path",{d:"m4.21 4.387.083-.094a1 1 0 0 1 1.32-.083l.094.083L12 10.585l6.293-6.292a1 1 0 1 1 1.414 1.414L13.415 12l6.292 6.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.32.083l-.094-.083L12 13.415l-6.293 6.292a1 1 0 0 1-1.414-1.414L10.585 12 4.293 5.707a1 1 0 0 1-.083-1.32l.083-.094-.083.094Z",fill:"#ffffff"})),ct=or;var $e=m(u()),rr=({variant:e="primary",size:r="medium",icon:t,children:o,...n})=>$e.default.createElement("button",{className:`button button-${e} button-${r}`,...n},t&&$e.default.createElement("span",{className:"button-icon"},t),o),j=rr;var G=m(u()),nr=0,ir=(()=>{let e;return{ToastContainer:()=>{let[t,o]=(0,G.useState)([]);e=(0,G.useCallback)((a,s=!1)=>{let l=nr++;o(c=>[...c,{id:l,message:a,isError:s,exiting:!1}]);let d=setTimeout(()=>{i(l)},3e3);return()=>clearTimeout(d)},[]);let i=a=>{o(s=>s.map(l=>l.id===a?{...l,exiting:!0}:l)),setTimeout(()=>{o(s=>s.filter(l=>l.id!==a))},500)};return G.default.createElement("div",{className:"toast-container"},t.map(a=>G.default.createElement("div",{key:a.id,className:`toast-element ${a.exiting?"toast-exit":""}`,style:{backgroundColor:`${a.isError?"rgba(200,20,20,0.5)":"rgba(20,20,20,0.5)"}`}},a.message,G.default.createElement(j,{icon:G.default.createElement(ct,null),onClick:()=>i(a.id)}))))},addToast:(t,o)=>e(t,o)}})(),{ToastContainer:dt,addToast:O}=ir;var pt=e=>{let r,t=new Set,o=(d,c)=>{let g=typeof d=="function"?d(r):d;if(!Object.is(g,r)){let p=r;r=c??(typeof g!="object"||g===null)?g:Object.assign({},r,g),t.forEach(f=>f(r,p))}},n=()=>r,s={setState:o,getState:n,getInitialState:()=>l,subscribe:d=>(t.add(d),()=>t.delete(d))},l=r=e(o,n,s);return s},ut=e=>e?pt(e):pt;var Ve=m(u(),1);var ar=e=>e;function sr(e,r=ar){let t=Ve.default.useSyncExternalStore(e.subscribe,()=>r(e.getState()),()=>r(e.getInitialState()));return Ve.default.useDebugValue(t),t}var mt=e=>{let r=ut(e),t=o=>sr(r,o);return Object.assign(t,r),t},ne=e=>e?mt(e):mt;function lr(e,r){let t;try{t=e()}catch{return}return{getItem:n=>{var i;let a=l=>l===null?null:JSON.parse(l,r?.reviver),s=(i=t.getItem(n))!=null?i:null;return s instanceof Promise?s.then(a):a(s)},setItem:(n,i)=>t.setItem(n,JSON.stringify(i,r?.replacer)),removeItem:n=>t.removeItem(n)}}var He=e=>r=>{try{let t=e(r);return t instanceof Promise?t:{then(o){return He(o)(t)},catch(o){return this}}}catch(t){return{then(o){return this},catch(o){return He(o)(t)}}}},cr=(e,r)=>(t,o,n)=>{let i={storage:lr(()=>localStorage),partialize:y=>y,version:0,merge:(y,M)=>({...M,...y}),...r},a=!1,s=new Set,l=new Set,d=i.storage;if(!d)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...y)},o,n);let c=()=>{let y=i.partialize({...o()});return d.setItem(i.name,{state:y,version:i.version})},g=n.setState;n.setState=(y,M)=>{g(y,M),c()};let p=e((...y)=>{t(...y),c()},o,n);n.getInitialState=()=>p;let f,C=()=>{var y,M;if(!d)return;a=!1,s.forEach(h=>{var I;return h((I=o())!=null?I:p)});let P=((M=i.onRehydrateStorage)==null?void 0:M.call(i,(y=o())!=null?y:p))||void 0;return He(d.getItem.bind(d))(i.name).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==i.version){if(i.migrate){let I=i.migrate(h.state,h.version);return I instanceof Promise?I.then($=>[!0,$]):[!0,I]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,h.state];return[!1,void 0]}).then(h=>{var I;let[$,ue]=h;if(f=i.merge(ue,(I=o())!=null?I:p),t(f,!0),$)return c()}).then(()=>{P?.(f,void 0),f=o(),a=!0,l.forEach(h=>h(f))}).catch(h=>{P?.(void 0,h)})};return n.persist={setOptions:y=>{i={...i,...y},y.storage&&(d=y.storage)},clearStorage:()=>{d?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>C(),hasHydrated:()=>a,onHydrate:y=>(s.add(y),()=>{s.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},i.skipHydration||C(),f||p},Ce=cr;var gt={isUseLocalImage:!1,selectedLocalImage:null},ie=ne(Ce(e=>({...gt,setUseLocalImage:r=>e(()=>({isUseLocalImage:r})),setSelectedLocalImage:r=>e(()=>({selectedLocalImage:r})),clearSelectedLocalImage:()=>e(()=>({...gt}))}),{name:"lucid-bg-image"}));var dr={solid:{opacity:1,backgroundColor:"var(--spice-main)"},static:{blur:32,opacity:1,saturation:1.1,contrast:1.2,brightness:.5},animated:{blur:32,time:45,opacity:1,saturation:1.1,contrast:1.2,brightness:.475}},pr={compact:{height:64,opacity:1,saturation:1.1,contrast:1.2,brightness:.8,borderRadius:8,backdropBlur:32,paddingX:6,backgroundColor:"rgba(var(--spice-rgb-player, var(--spice-rgb-card)), 0.5)"},default:{height:80,opacity:1,paddingX:6,saturation:1.1,contrast:1.2,borderRadius:8,brightness:.8,backdropBlur:32,backgroundColor:"rgba(var(--spice-rgb-player, var(--spice-rgb-card)), 0.5)"},rounded:{height:80,opacity:1,paddingX:20,saturation:1.1,contrast:1.2,borderRadius:999,brightness:.8,backdropBlur:32,backgroundColor:"rgba(var(--spice-rgb-player, var(--spice-rgb-card)), 0.5)"}},ke={backgroundSettings:{mode:"static",styles:dr,customBackgroundOverride:{url:null}},interfaceSettings:{controlSettings:{height:64},fontSettings:{body:{url:"https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap",fontFamily:"Poppins"}},grainSettings:{grainEffect:"default"},pagesSettings:{isScrollMode:!1,backgroundImageMode:"inherit",playlistViewMode:"card"},borderSettings:{color:"rgba(var(--spice-rgb-selected-row, var(--spice-rgb-text)), 0.125)",style:"inset",thickness:1,roundedRadius:12}},npvSettings:{mode:"normal",position:"right",blur:24},colorSettings:{isDynamicColor:!1,dynamicColorMode:"full"},playbarSettings:{mode:"default",styles:pr},settingAccessPosition:"nav"};var ur=e=>typeof e=="object"&&e!==null&&"backgroundSettings"in e&&"interfaceSettings"in e&&"playbarSettings"in e&&"colorSettings"in e&&typeof e.backgroundSettings=="object"&&"mode"in e.backgroundSettings&&"styles"in e.backgroundSettings&&typeof e.interfaceSettings=="object"&&"borderSettings"in e.interfaceSettings&&"fontSettings"in e.interfaceSettings&&typeof e.playbarSettings=="object"&&"mode"in e.playbarSettings&&typeof e.colorSettings=="object"&&"isDynamicColor"in e.colorSettings&&"dynamicColorMode"in e.colorSettings,S=ne(Ce((e,r)=>({...ke,exportSettings:()=>{let t=r();return JSON.stringify(t)},importSettings:t=>{try{let o=JSON.parse(t);if(!ur(o))throw new Error("Invalid settings structure");return e(o),O("Settings imported successfully!"),!0}catch(o){let n=o instanceof SyntaxError?"Failed to parse JSON: Please ensure your input is valid JSON.":o instanceof Error?o.message:"An unknown error occurred.";return O(n,!0),!1}},setBackgroundSettings:t=>e(o=>({backgroundSettings:{...o.backgroundSettings,...t}})),setNpvMode:t=>e(o=>({npvSettings:{...o.npvSettings,mode:t}})),setNpvBlur:t=>e(o=>({npvSettings:{...o.npvSettings,blur:t}})),setCompactNpvPosition:t=>e(o=>({npvSettings:{...o.npvSettings,position:t}})),setSettingAccessPosition:t=>e(()=>({settingAccessPosition:t})),setControlHeight:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,controlSettings:{height:t}}})),setCustomBackgroundOverride:t=>e(o=>({backgroundSettings:{...o.backgroundSettings,customBackgroundOverride:{...o.backgroundSettings.customBackgroundOverride,url:t}}})),setBorderColor:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,color:t}}})),setBorderStyle:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,style:t}}})),setRoundedBorderRadius:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,roundedRadius:t}}})),setBorderThickness:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,thickness:t}}})),setBackgroundStyles:(t,o)=>e(n=>({backgroundSettings:{...n.backgroundSettings,styles:{...n.backgroundSettings.styles,[o]:{...n.backgroundSettings.styles[o],...t}}}})),setColorSettings:t=>e(o=>({colorSettings:{...o.colorSettings,...t}})),setBorderSettings:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,borderSettings:{...o.interfaceSettings.borderSettings,...t}}})),setPlaybarSettings:t=>e(o=>({playbarSettings:{...o.playbarSettings,...t}})),setInterfaceSettings:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,...t}})),setBackgroundMode:t=>e(o=>({backgroundSettings:{...o.backgroundSettings,mode:t}})),updateBackgroundStyle:(t,o,n)=>e(i=>({backgroundSettings:{...i.backgroundSettings,styles:{...i.backgroundSettings.styles,[t]:{...i.backgroundSettings.styles[t],[o]:n}}}})),setFont:(t,o)=>e(n=>({interfaceSettings:{...n.interfaceSettings,fontSettings:{...n.interfaceSettings.fontSettings,[t]:{...o}}}})),setGrainEffect:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,grainSettings:{...o.interfaceSettings.grainSettings,grainEffect:t}}})),setIsScrollMode:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,pagesSettings:{...o.interfaceSettings.pagesSettings,isScrollMode:t}}})),setPagesBackgroundImageMode:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,pagesSettings:{...o.interfaceSettings.pagesSettings,backgroundImageMode:t}}})),setPlaylistViewMode:t=>e(o=>({interfaceSettings:{...o.interfaceSettings,pagesSettings:{...o.interfaceSettings.pagesSettings,playlistViewMode:t}}})),setIsDynamicColor:t=>e(o=>({colorSettings:{...o.colorSettings,isDynamicColor:t}})),setDynamicColorMode:t=>e(o=>({colorSettings:{...o.colorSettings,dynamicColorMode:t}})),updatePlaybarStyle:(t,o,n)=>e(i=>({playbarSettings:{...i.playbarSettings,styles:{...i.playbarSettings.styles,[t]:{...i.playbarSettings.styles[t],[o]:n}}}})),setPlaybarMode:t=>e(o=>({playbarSettings:{...o.playbarSettings,mode:t}})),resetAllSettings:()=>{e(ke)}}),{name:"lucid-settings",version:1.1,migrate:e=>({...ke,...e})}));var je=e=>{try{return new URL(e),!0}catch{return!1}},mr=e=>decodeURIComponent(e.match(/family=([^&:]+)/)?.[1]?.replace(/\+/g," ")||"")||"",ft=(e,r)=>{let t=document.getElementById(r);t||(t=document.createElement("link"),t.rel="stylesheet",t.id=r,document.head.appendChild(t)),t.href=e},yt=e=>{let r="",t="";return je(e)?(t=e,r=mr(e)):(t=e,r=e),{url:t,fontFamily:r}};var Me=(e,r,t)=>Object.entries(e[r]).map(([o,n])=>({id:`style-${r}`,sectionName:"Styles",conditionalRender:!0,cardProps:{title:`Set ${o}`,type:"input",settings:{label:"",defaultValue:n,...typeof n=="number"?{type:"number",onChange:i=>{t(r,o,Number(i))},settings:{max:256,min:0,step:.5}}:{type:"text",onChange:i=>{t(r,o,i)}}}}}));var gr=console.log,fr=console.debug,yr=console.error,Sr=console.warn,St={prefix:"font-weight: bold; color: #4DB6AC; font-size: 0.85rem;",error:"color: #dc3545;",warn:"color: #ffc107;",debug:"color: #17a2b8;",info:""},Pe=(e,r,...t)=>{let o={info:gr,debug:fr,error:yr,warn:Sr}[e],n=St[e];o(`%c[Lucid] %c${r}`,St.prefix,n,...t)},z=(e,...r)=>Pe("info",e,...r),v=(e,...r)=>Pe("debug",e,...r),w=(e,...r)=>Pe("error",e,...r),Ie=(e,...r)=>Pe("warn",e,...r);var Q=m(u()),br=({children:e})=>Q.default.createElement("div",{className:"tooltip-container"},Q.default.createElement("div",{className:"tooltip"},Q.default.createElement("span",{className:"tooltip-icon"},Q.default.createElement("svg",{role:"img","aria-label":"Tooltip icon",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Q.default.createElement("path",{d:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm0-8.75a2.75 2.75 0 0 1 2.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 0 1-1.5 0c0-1.01.297-1.574 1.051-2.359l.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 0 0-2.493-.128l-.007.128a.75.75 0 0 1-1.5 0A2.75 2.75 0 0 1 12 6.75Z",fill:"currentColor"}))),Q.default.createElement("span",{className:"tooltip-content"},e))),bt=br;var ae=m(u()),hr=({title:e,tooltip:r,selectedValue:t})=>ae.default.createElement("div",{className:"title-container"},ae.default.createElement("div",{className:"title-wrapper"},e&&ae.default.createElement("h5",{className:"encore-text encore-text-body-medium-bold"},e),r&&ae.default.createElement(bt,null,r)),t&&ae.default.createElement("p",{className:"selected-value"},"Selected: ",t)),ht=hr;var Ge=m(u()),vr=()=>Ge.default.createElement("svg",{role:"img","aria-label":"Arrow Down",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ge.default.createElement("path",{d:"M4.293 8.293a1 1 0 0 1 1.414 0L12 14.586l6.293-6.293a1 1 0 1 1 1.414 1.414l-7 7a1 1 0 0 1-1.414 0l-7-7a1 1 0 0 1 0-1.414Z",fill:"#ffffff"})),vt=vr;var L=m(u()),wr=({options:e,selectedValue:r,onChange:t,placeholder:o,disabled:n})=>{let i=(0,L.useRef)(null),[a,s]=(0,L.useState)(!1),l=()=>{s(c=>!c)},d=c=>{s(!1),t(c)};return(0,L.useEffect)(()=>{let c=g=>{i.current&&!i.current.contains(g.target)&&s(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),L.default.createElement(L.default.Fragment,null,L.default.createElement("div",{className:"dropdown-container",ref:i},L.default.createElement("button",{className:`dropdown-button ${a?"open":""}`,onClick:l,"aria-label":"Toggle dropdown menu",type:"button"},L.default.createElement("p",{className:"encore-text"},o||r||"Dropdown"),L.default.createElement("span",{className:"dropdown-arrow"},L.default.createElement(vt,null))),L.default.createElement("div",{className:`dropdown-menu ${a?"open":""}`},a?e?.map(c=>L.default.createElement("li",{key:c.value,className:`dropdown-item ${r===c.value?"selected":""}`,onClick:()=>!c.disabled&&d(c.value),onKeyDown:g=>!c.disabled&&g.key==="Enter"&&d(c.value),style:{opacity:`${n?.75:1}`}},L.default.createElement("p",{className:"encore-text"},c.label))):null)))},wt=wr;var Ct=(e,r)=>{let t=null;return(...o)=>{t&&clearTimeout(t),t=setTimeout(()=>{e(...o)},r)}};var N=m(u()),Cr=(0,N.forwardRef)(({label:e,defaultValue:r,onChange:t,type:o,placeholder:n,settings:i,validation:a},s)=>{let[l,d]=(0,N.useState)(r||null),[c,g]=(0,N.useState)(null),p=o==="file",f=o==="number",C=(0,N.useMemo)(()=>Ct(M=>{p||t?.(M)},1e3),[t,p]),y=(0,N.useCallback)(M=>{if(p){let P=M.target.files;t?.(P)}else if(f&&i){let P=Number(M.target.value),h=i.max??100,I=i.min??0;P>h?g(`Value cannot exceed ${h}`):P<I?g(`Value cannot be less than ${I}`):g(null);let $=Math.min(Math.max(P,I),h).toString();d($),C($)}else{let P=M.target.value;d(P),g(null),C(P)}},[C,i,p,f,t]);return(0,N.useEffect)(()=>{c&&O(c,!0)},[c]),N.default.createElement("div",{className:"input-container"},N.default.createElement("label",{"aria-label":e,className:p?"input":"label"},N.default.createElement("input",{"aria-label":e,type:o,accept:p?i?.accept??"image/*":void 0,multiple:p?i?.multiple??!1:void 0,className:"input encore-text",value:l??"",onChange:y,placeholder:n,step:f?i?.step??1:void 0,min:f?i?.min:void 0,max:f?i?.max:void 0,ref:s,style:p?{display:"none"}:{}}),p?"Upload Image":null))}),xe=Cr;var ge=m(u()),kr=({onChange:e,checked:r,label:t})=>ge.default.createElement("div",{className:"slider-wrapper"},ge.default.createElement("label",{className:"switch","aria-label":t},ge.default.createElement("input",{"aria-label":"toggleSwtich",type:"checkbox",checked:r,onChange:()=>{e(!r)}}),ge.default.createElement("span",{className:"slider round"}))),kt=kr;var Z=m(u()),Mr=({title:e,tooltip:r,selectedValue:t,type:o,settings:n,children:i,style:a})=>Z.default.createElement("div",{className:"card"},Z.default.createElement(ht,{title:e,tooltip:r,selectedValue:t}),Z.default.createElement("div",{className:"children-wrapper",style:a||{}},o==="dropdown"&&Z.default.createElement(wt,{...n}),o==="input"&&Z.default.createElement(xe,{...n}),o==="toggle"&&Z.default.createElement(kt,{...n}),o==="button"&&Z.default.createElement(j,{...n}),i)),fe=Mr;var Mt=m(u()),Pr=e=>{let{children:r,className:t,...o}=e;return Mt.default.createElement("div",{...o,className:`cards-wrapper ${t||""}`},r)},Le=Pr;var ee=m(u()),q=e=>{let[r,t]=(0,ee.useState)(new Map);return ee.default.useEffect(()=>{let o=new Map;for(let n of e)o.has(n.id)||o.set(n.id,[]),o.get(n.id)?.push(n);t(o)},[e]),Array.from(r.entries()).map(([o,n])=>{let i=n.filter(a=>a.conditionalRender);return i.length>0?ee.default.createElement(Le,{key:o,id:o,className:`${o} combine`},i[0]?.sectionName?ee.default.createElement("label",{"aria-label":i[0]?.sectionName,htmlFor:o},i[0]?.sectionName):null,i.map(a=>ee.default.createElement(fe,{key:a.id,...a.cardProps}))):null})};var k=m(u()),Ir=()=>{let{backgroundSettings:{mode:e,styles:r,customBackgroundOverride:t},colorSettings:{isDynamicColor:o,dynamicColorMode:n},setBackgroundMode:i,updateBackgroundStyle:a,setIsDynamicColor:s,setDynamicColorMode:l,setCustomBackgroundOverride:d}=S(),{isUseLocalImage:c,setUseLocalImage:g,clearSelectedLocalImage:p,selectedLocalImage:f,setSelectedLocalImage:C}=ie(),[y,M]=(0,k.useState)(e),P=x=>{M(x),i(x)},[h,I]=(0,k.useState)(n),$=x=>{I(x),l(x)},ue=[{id:"backgroundOption",conditionalRender:!0,cardProps:{title:"Background Option",type:"dropdown",tooltip:"Select the background mode to customize your background.",settings:{placeholder:y,selectedValue:y,options:Qe,onChange:P}}},...Me(r,e,a),{id:"backgroundCustomImage",sectionName:"Custom Background",conditionalRender:e==="static",cardProps:{title:"Background image",type:"input",tooltip:k.default.createElement(k.default.Fragment,null,k.default.createElement("span",null,"Use a custom URL for the background image."),k.default.createElement("span",null,"Ensure the URL is a valid image link (e.g., .jpg, .png)."),k.default.createElement("span",null,'Use "now-playing" for the now playing art image.'),k.default.createElement("span",null,'Use "current-page" for the current page art image.')),settings:{type:"text",defaultValue:t?.url||"",label:"Url",validation:x=>je(x),onChange:x=>{d(x)}}}},{id:"backgroundCustomImage",conditionalRender:e==="static",cardProps:{title:"Use Local Image",type:"toggle",tooltip:k.default.createElement(k.default.Fragment,null,k.default.createElement("p",null,"Import an image from your device to use as the background."),f?.dataURL?k.default.createElement("div",null,k.default.createElement("img",{width:"20rem",src:f.dataURL,alt:`${f?.fileName} img`,style:{display:"block",width:"20rem",borderRadius:"0.5rem",border:"var(--border-thickness) var(--border-style, solid) var(--border-color, rgba(var(--spice-rgb-text), 0.125))"}}),f?.fileName?k.default.createElement("p",null,"File name: ",k.default.createElement("span",null,f.fileName)):null,f?.dateAdded?k.default.createElement("p",null,"Date Added: ",k.default.createElement("span",null,f.dateAdded)):null):null),settings:{checked:c,label:"Enable Local Image",onChange:x=>{x||p(),g(x)}}}},{id:"backgroundCustomImageInput",conditionalRender:e==="static"&&c,cardProps:{title:"Select Background Image",type:"input",tooltip:"Choose an image file from your device.",settings:{type:"file",label:"Choose File",onChange:x=>{let re=x?.[0];if(re){let be=new FileReader;be.readAsDataURL(re),be.onload=he=>{let ve=he.target?.result||"";v("Local Image Data URL:",ve),O(k.default.createElement("div",{style:{display:"flex",alignItems:"center"}},k.default.createElement("span",{style:{marginRight:"10px"}},"Successfully Added Local Image as background from File name:"),k.default.createElement("span",{style:{fontWeight:"bold"}},re.name))),C({dataURL:ve,fileName:re.name||"",dateAdded:new Date().toLocaleString()})}}}}}},{id:"dynamicColorToggle",conditionalRender:!0,cardProps:{title:"Dynamic Color",type:"toggle",tooltip:"Enable dynamic color to adjust colors based on current playing album art.",settings:{checked:o,label:"Dynamic Color Toggle",onChange:x=>{s(x),x&&O("Enabled Dynamic Color.")}}}},{id:"dynamicColorMode",conditionalRender:o,cardProps:{title:"Dynamic Color Mode",type:"dropdown",tooltip:"Choose whether to adjust the color of all elements or just the accent color.",settings:{placeholder:h,selectedValue:h,options:et,onChange:$}}}];return k.default.createElement(V,{title:"Background Settings",description:"Set your Spotify interface settings."},q(ue))},Pt=Ir;var D=m(u()),xr=()=>{let{exportSettings:e,importSettings:r}=S(),[t,o]=(0,D.useState)(!1),n=(0,D.useRef)(null),i=()=>{o(d=>!d),t&&n.current&&(n.current.value="")},a=()=>{let d=n.current?.value.trim()||"{}";if(d==="{}"){O("Please enter valid JSON settings.",!0);return}r(d)};return D.default.createElement(V,{title:"Settings Import/Export",description:"Manage your settings easily."},D.default.createElement(Le,null,D.default.createElement(fe,{title:"Import and Export Settings",type:"normal",tooltip:"Use these buttons to import settings from a JSON file or export your current theme settings to your clipboard.",style:{display:"flex",gap:"0.5rem"}},D.default.createElement(j,{onClick:()=>{let d=e();navigator.clipboard.writeText(d).then(()=>{O("Settings exported to clipboard!")}).catch(c=>{w("Failed to copy: ",c),O("Failed to copy settings to clipboard.",!0)})}},"Export"),D.default.createElement(j,{onClick:i,variant:t?"danger":"primary"},t?"Cancel Import":"Import")),t&&D.default.createElement(fe,{title:"Import Settings JSON",type:"normal",tooltip:"Paste your JSON settings here to import them. Ensure the JSON is correctly formatted.",style:{display:"flex",gap:"0.5rem"}},D.default.createElement(j,{onClick:async()=>{try{let d=await navigator.clipboard.readText();n.current&&(n.current.value=d,a()),O("Clipboard content pasted successfully!")}catch(d){w("Failed to read clipboard: ",d),O("Failed to read clipboard content.",!0)}}},"Paste And Import"),D.default.createElement(xe,{ref:n,type:"text",label:"Paste JSON here",placeholder:"Paste JSON here"}),D.default.createElement(j,{onClick:a},"Import"))))},It=xr;var xt=()=>Spicetify.Platform&&Spicetify.Platform.operatingSystem==="Windows"?!0:Spicetify.Platform?.PlatformData?.os_name?Spicetify.Platform.PlatformData.os_name.toLowerCase().includes("win"):!1,Lt=()=>Spicetify?.Config.color_scheme==="light"||!1,Et=()=>!!(document.querySelector(".globalNav")||document.querySelector(".Root__globalNav"));async function Tt(e){try{Spicetify?.Platform?.ControlMessageAPI?._updateUiClient?.updateTitlebarHeight({height:e}),Spicetify?.Platform?.UpdateAPI?._updateUiClient?.updateTitlebarHeight({height:e}),Spicetify.CosmosAsync.post("sp://messages/v1/container/control",{type:"update_titlebar",height:`${e}px`}),z(`Control height set to ${e}px`)}catch(r){w(`Error setting control height: ${e}`,r)}}function _t(){return document.getElementById("customControls")?(document.querySelector(".lucid-transperent-window-controls")?.remove(),!0):!1}var Nt="https://api.github.com/repos/sanoojes/spicetify-lucid/releases",At=".Root__main-view .os-viewport, .Root__main-view .main-view-container > .main-view-container__scroll-node:not([data-overlayscrollbars-initialize]), .Root__main-view .main-view-container__scroll-node > [data-overlayscrollbars-viewport]",Bt="playlist-art-image-",Ot="playlist-view-",We=Spicetify?.Platform?.version>="1.2.46",Dt=Lt(),te=xt(),Rt=Et(),Ee=_t();var E=m(u()),Lr=()=>{let{interfaceSettings:{controlSettings:{height:e},fontSettings:{body:{fontFamily:r}},grainSettings:{grainEffect:t},pagesSettings:{isScrollMode:o,backgroundImageMode:n,playlistViewMode:i},borderSettings:{color:a,style:s,thickness:l,roundedRadius:d}},npvSettings:{mode:c,position:g,blur:p},setFont:f,setGrainEffect:C,setControlHeight:y,setPagesBackgroundImageMode:M,setPlaylistViewMode:P,setIsScrollMode:h,setNpvMode:I,setNpvBlur:$,setCompactNpvPosition:ue,setBorderColor:x,setBorderStyle:re,setBorderThickness:be,settingAccessPosition:he,setRoundedBorderRadius:ve,setSettingAccessPosition:jo}=S(),[qe,Go]=(0,E.useState)(t),[Ye,Wo]=(0,E.useState)(n),[Je,zo]=(0,E.useState)(i);return E.default.createElement(V,{title:"Interface Settings",description:"Set your Spotify interface settings."},q([{id:"controlSettings",conditionalRender:te,cardProps:{title:"Set Control Height",tooltip:"Set the height of your window controls in pixels.",type:"input",settings:{type:"number",label:"Enter Control Height",defaultValue:e,onChange:b=>{y(Number(b))},settings:{step:1,min:1,max:64}}}},{id:"themeSettings",conditionalRender:!0,cardProps:{title:"Settings Access Position",tooltip:"Choose how to access settings: via the context menu button or a navigation button.",type:"dropdown",settings:{options:at,placeholder:he,selectedValue:he,onChange:b=>{jo(b)}}}},{id:"npvSettings",conditionalRender:!0,cardProps:{title:"Set Right Sidebar Mode",tooltip:E.default.createElement(E.default.Fragment,null,E.default.createElement("h3",{className:"encore-text encore-text-medium-bold"},"Select how the right sidebar appears during playback."),E.default.createElement("span",null,"Choose 'Compact' for a minimized view or 'Normal' for a detailed layout")),type:"dropdown",settings:{options:st,placeholder:c,selectedValue:c,onChange:b=>{I(b)}}}},{id:"npvSettings",conditionalRender:c==="compact",cardProps:{title:"Set Compact Sidebar Position",tooltip:E.default.createElement(E.default.Fragment,null,E.default.createElement("h3",{className:"encore-text encore-text-medium-bold"},"Select where the right sidebar appears.")),type:"dropdown",settings:{options:lt,placeholder:g,selectedValue:g,onChange:b=>{ue(b)}}}},{id:"npvSettings",sectionName:"Styles",conditionalRender:c==="compact",cardProps:{title:"Set Npv Background Blur",type:"input",settings:{label:"Npv Background Blur input",defaultValue:p,onChange:b=>{$(Number(b))},type:"number",settings:{max:256,min:0,step:.5}}}},{id:"font",conditionalRender:!0,cardProps:{title:"Font",type:"input",tooltip:E.default.createElement(E.default.Fragment,null,"Supports both Google Fonts via URL and local fonts.",E.default.createElement("span",null,"For Google Fonts, use the full URL (e.g., https://fonts.googleapis.com/css2?family=Roboto). "),E.default.createElement("span",null,"For local fonts, type the font family name (e.g., 'Arial').")),settings:{type:"text",label:"Font Family or URL",defaultValue:r,onChange:b=>{f("body",yt(b.toString()))}}}},{id:"grains",conditionalRender:!0,cardProps:{type:"dropdown",title:"Grains",tooltip:"Choose a grain texture mode.",settings:{options:ot,placeholder:qe,selectedValue:qe,onChange:b=>{Go(b),C(b)}}}},{id:"pageSettings",sectionName:"Pages Setting",conditionalRender:!0,cardProps:{type:"dropdown",title:"Pages Background Image",tooltip:"Choose a background image mode for playlist pages.",settings:{options:rt,placeholder:Ye,selectedValue:Ye,onChange:b=>{Wo(b),M(b)}}}},{id:"pageSettings",conditionalRender:!0,cardProps:{type:"dropdown",tooltip:"Sets the view mode for playlists.",title:"Playlist View",settings:{options:nt,placeholder:Je,selectedValue:Je,onChange:b=>{zo(b),P(b)}}}},{id:"pageSettings",conditionalRender:!0,cardProps:{title:"Toggle Playlist Scroll Mode",tooltip:"Enable or disable scrolling for the playlist art image.",type:"toggle",settings:{checked:o,label:"Scroll Mode Toggle",onChange:b=>{h(b)}}}},{id:"borderSettings",conditionalRender:!0,sectionName:"Border Settings",cardProps:{title:"Border Thickness",type:"input",settings:{type:"number",label:"Border Thickness",defaultValue:l,onChange:b=>{be(Number(b))},settings:{step:1,min:0,max:8}}}},{id:"borderSettings",conditionalRender:!0,sectionName:"Border Settings",cardProps:{title:"Rounded Border Radius",type:"input",settings:{type:"number",label:"Rounded Border Radius",defaultValue:d,onChange:b=>{ve(Number(b))},settings:{step:1,min:0,max:999}}}},{id:"borderSettings",conditionalRender:!0,cardProps:{title:"Border Color",type:"input",settings:{type:"text",label:"Border Color",defaultValue:a,onChange:b=>{x(b)}}}},{id:"borderSettings",conditionalRender:!0,cardProps:{title:"Border Style",type:"dropdown",settings:{options:it,selectedValue:s,onChange:b=>{re(b)}}}}]))},Ut=Lr;var Te=m(u()),Er=()=>{let{playbarSettings:{mode:e,styles:r},setPlaybarMode:t,updatePlaybarStyle:o}=S(),[n,i]=(0,Te.useState)(e),s=[{id:"playbarOption",conditionalRender:!0,cardProps:{title:"Playbar Option",type:"dropdown",settings:{placeholder:n,selectedValue:n,options:tt,onChange:l=>{i(l),t(l)}}}},...Me(r,e,o)];return Te.default.createElement(V,{title:"Playbar Settings",description:"Set your Spotify Now Playing Bar settings."},q(s))},Ft=Er;var $t=m(u()),Tr=()=>{let{resetAllSettings:e}=S();return $t.default.createElement(V,{title:"Reset Settings",description:"Reset your theme settings."},q([{id:"resetButtonCard",conditionalRender:!0,cardProps:{title:"Reset All Settings",type:"button",settings:{variant:"danger",size:"medium",children:"Reset",onClick:()=>{window.confirm("Are you sure you want to reset all settings to their default values? This action cannot be undone.")&&e()}}}}]))},Vt=Tr;var R=m(u()),_r={settings:!1,changelog:!1},Nr=()=>{let e=(0,R.createContext)(null);return{ModalContextProvider:({children:o})=>{let[n,i]=(0,R.useState)(_r),a=(0,R.useCallback)(l=>{let d=n[l],c=(0,R.useCallback)(()=>{i(p=>({...p,[l]:!0}))},[l]),g=(0,R.useCallback)(()=>{i(p=>({...p,[l]:!1}))},[l]);return{isOpen:d,openModal:c,closeModal:g}},[n]),s=(0,R.useMemo)(()=>a,[a]);return R.default.createElement(e.Provider,{value:s},o)},useModal:o=>{let n=(0,R.useContext)(e);if(n)return n(o);throw new Error("Wrap Element with ModalContextProvider")}}},{ModalContextProvider:Ht,useModal:Y}=Nr();var H=m(u()),Ar=(0,H.memo)(()=>{let{isOpen:e,closeModal:r}=Y("settings");return H.default.createElement(we,{title:"Lucid Settings",onClose:r,isOpen:e},H.default.createElement("div",{className:"sections-container"},H.default.createElement(Pt,null),H.default.createElement(Ut,null),H.default.createElement(Ft,null),H.default.createElement(Vt,null),H.default.createElement(It,null)))}),jt=Ar;var _e=m(u()),Br=()=>{v("hook running useSettingsAccess");let{settingAccessPosition:e}=S(),{openModal:r}=Y("settings"),t=(0,_e.useRef)(null);(0,_e.useEffect)(()=>{if(e==="context-menu"&&(t.current=new Spicetify.Menu.Item("Lucid Settings",!1,r,'<svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="#fff"/></svg>'),t.current.register()),e==="nav"&&!document.querySelector(".main-actionButtons button[aria-label='Lucid Settings']")&&!(t.current instanceof HTMLButtonElement)){let o=new Spicetify.Topbar.Button("Lucid Settings",'<svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="currentColor"/></svg>',r,!1,!0);t.current=o}return()=>{t.current instanceof Spicetify.Menu.Item&&t.current.deregister(),t.current instanceof Spicetify.Topbar.Button&&t.current.element.remove(),document.querySelector(".Root__globalNav .main-actionButtons div:has(button[aria-label='Lucid Settings'])")?.remove()}},[e,r])},Gt=Br;var se=m(u()),Or=(0,se.memo)(()=>{v("Render <SettingsManager />");let{isOpen:e}=Y("settings");return Gt(),se.default.createElement(se.default.Fragment,null,e&&se.default.createElement(jt,null))}),Wt=Or;var Ne=(e,r)=>[e,r].filter(Boolean).join(" ").trim(),Ae=e=>{if(!Object.keys(e).length)return{};let r={};return e.blur!==void 0&&(r.filter=Ne(r.filter,`blur(${e.blur}px)`)),e.backdropBlur!==void 0&&(r.backdropFilter=`blur(${e.backdropBlur}px)`),e.contrast!==void 0&&(r.filter=Ne(r.filter,`contrast(${e.contrast})`)),e.brightness!==void 0&&(r.filter=Ne(r.filter,`brightness(${e.brightness})`)),e.saturation!==void 0&&(r.filter=Ne(r.filter,`saturate(${e.saturation})`)),e.opacity!==void 0&&(r.opacity=e.opacity),e.width!==void 0&&(r.width=`${e.width}px`),e.height!==void 0&&(r.height=`${e.height}px`),(e.paddingX!==void 0||e.paddingY!==void 0)&&(r.padding=`${e.paddingY||0}px ${e.paddingX||0}px`),e.borderRadius!==void 0&&(r.borderRadius=`${e.borderRadius}px`),e.backgroundColor!==void 0&&(r.backgroundColor=`${e.backgroundColor}`),r},Be=(e,r=!1)=>{if(!Object.keys(e).length)return r?"":{};let t={};return e.blur!==void 0&&(t["--blur"]=`${e.blur}px`),e.backdropBlur!==void 0&&(t["--backdrop-blur"]=`${e.backdropBlur}px`),e.contrast!==void 0&&(t["--contrast"]=e.contrast),e.brightness!==void 0&&(t["--brightness"]=e.brightness),e.saturation!==void 0&&(t["--saturation"]=e.saturation),e.width!==void 0&&(t["--width"]=`${e.width}px`),e.height!==void 0&&(t["--height"]=`${e.height}px`),e.paddingX!==void 0&&(t["--padding-x"]=`${e.paddingX}px`),e.borderRadius!==void 0&&(t["--border-radius"]=`${e.borderRadius}px`),e.backgroundColor!==void 0&&(t["--background-color"]=e.backgroundColor),e.time!==void 0&&(t["--time"]=`${e.time}s`),e.opacity!==void 0&&(t["--opacity"]=e.opacity),r?Object.entries(t).map(([o,n])=>`${o}: ${n};`).join(" "):t};var le=m(u()),Dr=({style:e})=>le.default.createElement("div",{className:"animated-background-container",style:{...Be(e)}},le.default.createElement("div",{className:"back"}),le.default.createElement("div",{className:"backleft"}),le.default.createElement("div",{className:"backright"}),le.default.createElement("div",{className:"front"})),zt=Dr;var Zt=m(u()),Rr=({style:e})=>Zt.default.createElement("div",{className:"solid-background",style:{...Ae(e)}}),ze=Rr;var Ur={underMainBackgroundImage:"",pageCategory:"other",artworkData:{nowPlayingArtURL:"",currentPageURI:"",currentPageArtURL:""},windowZoom:1},_=ne(e=>({...Ur,updateArtworkData:r=>e(t=>({...t,artworkData:{...t.artworkData,...r}})),setPageCategory:r=>e(t=>({...t,pageCategory:r})),setUnderMainViewBackgroundImage:r=>e(t=>({...t,underMainBackgroundImage:r})),setIsCustomControls:r=>e(t=>({...t,isCustomControls:r})),setWindowZoom:r=>e(t=>({...t,windowZoom:r}))}));var qt=m(u()),Fr=({style:e})=>{let{backgroundSettings:{customBackgroundOverride:r}}=S(),{artworkData:t}=_(),{isUseLocalImage:o,selectedLocalImage:n}=ie(),i=(()=>{if(o&&n?.dataURL)return n.dataURL;let a=r.url;return a==="current-page"?t?.currentPageArtURL||t?.nowPlayingArtURL||"":!a||a.trim()===""||a==="now-playing"?t?.nowPlayingArtURL||"":a||""})();return qt.default.createElement("div",{className:"static-background",style:{backgroundImage:`url("${i}")`,...Ae(e)}})},Yt=Fr;var Oe=m(u()),$r={animated:zt,static:Yt,solid:ze},Vr=()=>{v("Render <BackgroundManager />");let{backgroundSettings:{mode:e,styles:r}}=S(),t=r[e],o=$r[e];return Oe.default.createElement("div",{className:"background-wrapper"},o?Oe.default.createElement(o,{style:t}):Oe.default.createElement(ze,{style:{backgroundColor:"#202020"}}))},Jt=Vr;var Xt=async()=>{await(async()=>{for(;!Spicetify?.Player?.data;)await new Promise(n=>setTimeout(n,100))})();let{item:r}=Spicetify.Player.data;return!r||!r.metadata?(w("No item or metadata found in Spicetify Player data."),""):[r.metadata.image_xlarge_url,r.metadata.image_large_url,r.metadata.image_url,r.metadata.image_small_url].find(n=>n)||Hr()||""},Hr=()=>document.querySelector(".Root__right-sidebar .main-nowPlayingView-nowPlayingWidget .main-image-image")?.src||"",jr=async e=>{let t=0;for(;t<=3;)try{let o=await Spicetify.GraphQL.Request({name:"queryArtistOverview",operation:"query",sha256Hash:"35648a112beb1794e39ab931365f6ae4a8d45e65396d641eeda94e4003d41497",value:null},{uri:e,includePrerelease:!0,locale:null});if(o)return o}catch(o){if(o instanceof Error&&o.message.includes("DUPLICATE_REQUEST_ERROR")&&t<3){t++,Ie(`Duplicate request detected (getArtistMetaData). Retrying in 1 second... (Attempt ${t})`),await new Promise(n=>setTimeout(n,1e3));continue}throw w("Error fetching artist metadata:",o),o}},Gr=async e=>{let t=0;for(;t<=3;)try{let o=await Spicetify.GraphQL.Request({name:"getAlbum",operation:"query",sha256Hash:"469874edcad37b7a379d4f22f0083a49ea3d6ae097916120d9bbe3e36ca79e9d",value:null},{uri:e,locale:null,offset:0,limit:50});if(o)return o}catch(o){if(o instanceof Error&&o.message.includes("DUPLICATE_REQUEST_ERROR")&&t<3){t++,Ie(`Duplicate request detected (getAlbumMetaData). Retrying in 1 second... (Attempt ${t})`),await new Promise(n=>setTimeout(n,1e3));continue}throw w("Error fetching album metadata:",o),o}},Kt=e=>{let r=Spicetify.URI.isPlaylistV1OrV2(e),t=Spicetify.URI.isArtist(e),o=Spicetify.URI.isAlbum(e),n=Spicetify.URI.isShow(e),i=Spicetify.URI.isProfile(e);if(r||t||o||i||n){let a=e.match(/\/(?:playlist|artist|album|user|show)\/([^/]+)/)?.[1];return a?`spotify:${r?"playlist":t?"artist":o?"album":n?"show":"user"}:${a}`:(Ie("No ID found in pathname:",e),null)}return null},Qt=async e=>{let r=e.split(":")[1];try{switch(r){case"playlist":case"show":return(await Spicetify.Platform.PlaylistAPI.getMetadata(e)).images.find(o=>o.url)?.url||null;case"artist":{let t=await jr(e);return t.data?.artistUnion.visuals.headerImage?.sources?.[0]?.url||t.data?.artistUnion.visuals.avatarImage?.sources?.[0]?.url||null}case"album":{let t=await Gr(e);return t.data?.albumUnion.coverArt.sources?.[2]?.url||t.data?.albumUnion.coverArt.sources?.[0]?.url||null}case"user":return(await Spicetify.Platform.RequestBuilder.build().withHost("https://spclient.wg.spotify.com/user-profile-view/v3").withPath(`/profile/${e.split(":")[2]}`).send())?.body?.image_url||null;default:return null}}catch(t){return w(`Error fetching artwork for ${r}:`,t),null}};var ce=m(u()),Wr=()=>{v("Render <ArtworkManager />");let{pageCategory:e,artworkData:r,updateArtworkData:t}=_(),{interfaceSettings:{pagesSettings:o}}=S(),n=(0,ce.useCallback)(async()=>{let i=Spicetify.Platform.History.location.pathname,a=Kt(i);if(r.currentPageURI!==a){document.documentElement.style.setProperty("--artwork-opacity","0");try{if(a){let s=await Qt(a)||"";t({currentPageArtURL:s,currentPageURI:a})}else t({currentPageArtURL:"",currentPageURI:""})}catch(s){w("Error updating artwork:",s),t({currentPageArtURL:"",currentPageURI:""})}finally{setTimeout(()=>document.documentElement.style.setProperty("--artwork-opacity","1"),500)}}},[r.currentPageURI,t]);return(0,ce.useEffect)(()=>{if(r.currentPageArtURL?(document.documentElement.style.setProperty("--playlist-art-image",`url(${r.currentPageArtURL})`),z(`Updated Playlist Artwork URL to ${r.currentPageArtURL}`)):r.currentPageURI&&e!=="other"&&(w(`No artwork URL found for URI: ${r.currentPageURI}`),document.documentElement.style.setProperty("--playlist-art-image","none")),o.backgroundImageMode==="inherit"){let i=Spicetify.Platform.History.listen(n);return n(),()=>{i()}}},[o.backgroundImageMode,r.currentPageArtURL,r.currentPageURI,e,n]),(0,ce.useEffect)(()=>{r.nowPlayingArtURL&&(document.documentElement.style.setProperty("--now-playing-art-image",`url("${r.nowPlayingArtURL}")`),z(`Updated Now Playing Art View: ${r.nowPlayingArtURL}`))},[r.nowPlayingArtURL]),(0,ce.useEffect)(()=>{let i=async()=>{let a=await Xt();t({nowPlayingArtURL:a})};return i(),Spicetify.Player.addEventListener("songchange",i),()=>{Spicetify.Player.removeEventListener("songchange",i)}},[t]),null},eo=Wr;var to=m(u()),zr=()=>{let{interfaceSettings:{borderSettings:e}}=S();return(0,to.useEffect)(()=>{let t=(o=>Object.keys(o).length?Object.entries(o).map(([n,i])=>`--border-${n}: ${n==="thickness"||n==="roundedRadius"?`${i}px`:i};`).join(" "):"")(e);document.documentElement.style.cssText+=t},[e]),null},oo=zr;var ro=({r:e,g:r,b:t})=>{e/=255,r/=255,t/=255;let o=Math.max(e,r,t),n=Math.min(e,r,t),i=o-n,a=0,s=0,l=(o+n)/2;return i!==0&&(s=l>.5?i/(2-o-n):i/(o+n),o===e?a=((r-t)/i+(r<t?6:0))*60:o===r?a=((t-e)/i+2)*60:a=((e-r)/i+4)*60),{h:Math.round(a),s:Math.round(s*100),l:Math.round(l*100)}},Ze=({r:e,g:r,b:t})=>`#${(16777216|e<<16|r<<8|t).toString(16).slice(1).toUpperCase()}`,no=({h:e,s:r,l:t})=>{let o=(1-Math.abs(2*t/100-1))*(r/100),n=o*(1-Math.abs(e/60%2-1)),i=t/100-o/2,a=0,s=0,l=0;return e>=0&&e<60?[a,s,l]=[o,n,0]:e>=60&&e<120?[a,s,l]=[n,o,0]:e>=120&&e<180?[a,s,l]=[0,o,n]:e>=180&&e<240?[a,s,l]=[0,n,o]:e>=240&&e<300?[a,s,l]=[n,0,o]:e>=300&&e<360&&([a,s,l]=[o,0,n]),{r:Math.round((a+i)*255),g:Math.round((s+i)*255),b:Math.round((l+i)*255)}};var De="lucid_dynamic_colors",de=16,io=16,ao="dynamic_color_canvas",Zr=()=>{let e=`${De}_will_change`,r=document.getElementById(e);r||(r=document.createElement("style"),r.id=e,document.head.appendChild(r)),r.innerText=`:root{
will-change: --spice-main,--spice-rgb-main,--spice-sidebar,--spice-rgb-sidebar,--spice-card,--spice-rgb-card,--spice-player,--spice-rgb-player,--spice-accent,--spice-rgb-accent,--spice-highlight,--spice-rgb-highlight,--spice-button,--spice-rgb-button,--spice-button-active,--spice-rgb-button-active,--spice-text,--spice-rgb-text,--spice-progress-bar,--spice-rgb-progress-bar,--spice-subtext,--spice-rgb-subtext,--spice-primary,--spice-rgb-primary,--spice-secondary,--spice-rgb-secondary,--spice-tertiary,--spice-rgb-tertiary;
transition: all 0.3s ease-in-out;
}`},qr=async e=>{let r=document.getElementById(ao);r||(r=document.createElement("canvas"),r.id=ao),r.height=de,r.width=de;let t=r.getContext("2d",{willReadFrequently:!0});if(!t){w("Failed to create canvas context");return}let o,n=new Image;n.src=e;let i=async()=>{try{let a=await createImageBitmap(n,{resizeHeight:io,resizeWidth:io,resizeQuality:"pixelated"}),s=2,l=Math.floor(Math.random()*(de-s)),d=Math.floor(Math.random()*(de-s));t.drawImage(a,0,0,de,de);let g=t.getImageData(l,d,s,s).data,p={r:g[0],g:g[1],b:g[2]},f=ro(p),C=Ze(p),y={rgb:p,hex:C,hsl:f};console.log(y),o=y}catch(a){console.error(a),w("Error processing image")}};return await new Promise((a,s)=>{n.onload=async()=>{await i(),a()},n.onerror=()=>{w("Failed to load image"),s("Failed to load image")}}),o},Yr=e=>{let r=e.map(({name:o,color:n})=>[`--spice-${o}: ${n.hex} !important;`,`--spice-rgb-${o}: ${n.rgb.r},${n.rgb.g},${n.rgb.b} !important;`].join("")),t=document.getElementById(De);t||(t=document.createElement("style"),t.id=De,document.head.appendChild(t)),t.innerText=`:root {${r.join("")}}`,console.log(t)},so=()=>{let e=document.getElementById(De);e&&e.remove()},lo=async e=>{Zr();let r=await qr(e);if(!r)return;let t=Jr(r.hsl),o={button:80,"selected-row":95,"button-active":80,player:20,misc:20,text:90,"main-elevated":20,subtext:95,shadow:0,main:20,highlight:20,sidebar:8,card:20,notification:20,"notification-error":80,"highlight-elevated":20,"button-disabled":20,accent:80,"tab-active":30},i=(a=>Object.keys(o).map(s=>{let l=o[s];return{name:s,color:{hex:a[l].hex,rgb:a[l].rgb}}}))(t);Yr(i)},Jr=({h:e,s:r})=>{let t=[0,5,8,10,20,30,40,50,60,70,80,90,95,99,100],o={};for(let n of t){let i={h:e,s:r,l:n},a=no(i),s=Ze(a);o[n]={rgb:a,hex:s,hsl:i}}return o};var co=m(u()),Xr=()=>{v("Render <ColorManager />");let{colorSettings:{isDynamicColor:e}}=S(),{artworkData:r}=_(),{selectedLocalImage:t,isUseLocalImage:o}=ie();return(0,co.useEffect)(()=>{if(!e){so();return}lo(o&&t?.dataURL?t.dataURL:r.nowPlayingArtURL)},[t,o,r.nowPlayingArtURL,e]),null},po=Xr;var ye=m(u()),Kr=()=>{let{interfaceSettings:{fontSettings:e}}=S(),r=(0,ye.useCallback)((o,n)=>{document.documentElement.style.setProperty(`--${o}-font-to-use`,n)},[]),t=(0,ye.useCallback)(async o=>{let{fontFamily:n,url:i}=e[o];try{await ft(i,`${o}-font`),r(o,n)}catch(a){w(`Failed to load font from ${i}`,a),r(o,n)}},[e,r]);return(0,ye.useEffect)(()=>{Object.keys(e).map(o=>t(o))},[e,t]),null},uo=Kr;var mo=m(u()),A=e=>{(0,mo.useEffect)(()=>{if(e)return document.body.classList.add(e),()=>{document.body.classList.remove(e)}},[e])};var Qr=()=>(v("Render <GlobalNavManager />"),A(Rt?"global-nav":"control-nav"),null),go=Qr;var fo=m(u()),en=()=>{v("Render <GrainManager />");let{interfaceSettings:{grainSettings:{grainEffect:e}}}=S();return A(`grain-${e}`),fo.default.createElement("div",{id:"grainEffect","data-grainEffect":e})},yo=en;var tn=()=>{let{npvSettings:{mode:e,position:r,blur:t}}=S();return document.body.style.setProperty("--compact-npv-blur",`${t}px`),A(`${e}-npv`),A(`${r}-npv`),null},So=tn;var bo=e=>Spicetify.URI.isPlaylistV1OrV2(e)?"playlist":Spicetify.URI.isArtist(e)?"artist":Spicetify.URI.isAlbum(e)?"album":Spicetify.URI.isGenre(e)?"genre":Spicetify.URI.isShow(e)?"show":Spicetify.URI.isSearch(e)?"search":Spicetify.URI.isProfile(e)?"profile":Spicetify.URI.isConcert(e)||Spicetify.URI.isArtistConcerts(e)?"concert":"other";var ho=m(u()),on=()=>{let{pageCategory:e,setPageCategory:r}=_();return A(e),(0,ho.useEffect)(()=>{let t=()=>{let n=Spicetify.Platform.History.location.pathname;r(bo(n))};t();let o=Spicetify.Platform.History.listen(()=>{t()});return()=>{o()}},[r]),null},vo=on;var Re=m(u()),wo=".Root__now-playing-bar",rn=()=>{let{playbarSettings:e}=S(),r=(0,Re.useRef)(document.querySelector(wo));return A(`playbar-${e.mode}`),(0,Re.useEffect)(()=>{if(!r.current){w(`Playbar element with class '${wo}' not found!`);return}let{mode:t,styles:o}=e,n=Be(o[t],!0),i=t==="compact"?o[t].height:r.current?.clientHeight||o[t]?.height;document.documentElement.style.setProperty("--playbar-height",`${i}px`),r.current.style.cssText=n.toString()},[e]),null},Co=rn;var Se=m(u()),nn=()=>{let{underMainBackgroundImage:e,setUnderMainViewBackgroundImage:r}=_(),t=(0,Se.useCallback)(o=>{let n=o.reduce((a,s)=>{if(a)return a;if(s.type==="childList"&&s.addedNodes.length>0){let l=s.addedNodes[0];if(l.firstChild instanceof HTMLDivElement)return l.firstChild}return null},null),i=null;n?.style?i=n.style.backgroundImage.replace(/url\(['"]?([^'"]*)['"]?\)/i,"$1"):e!==null&&(i=null),r(i)},[r,e]);(0,Se.useEffect)(()=>{let o=new MutationObserver(t),n=document.querySelector(".under-main-view");return n&&o.observe(n,{childList:!0}),()=>o.disconnect()},[t]),(0,Se.useEffect)(()=>(document.documentElement.style.setProperty("--under-main-view-art-image",e?`url(${e})`:null),()=>{document.documentElement.style.removeProperty("--under-main-view-art-image")}),[e])},ko=nn;var U=m(u()),an=()=>{let{interfaceSettings:{pagesSettings:{playlistViewMode:e,isScrollMode:r,backgroundImageMode:t}}}=S(),{pageCategory:o,underMainBackgroundImage:n,artworkData:i}=_(),a=(0,U.useRef)(null),s=(0,U.useRef)(null);A(`${Ot}${e}`),A(`${Bt}${t}`),A(`${n?"under-main-view-present":""}`);let l=(0,U.useCallback)(p=>{let{current:f}=a;if(f){let C=Math.min(p.scrollTop,window.innerHeight);f.style.transform=`translate3d(0, ${r?-C:0}px, 0)`,f.style.setProperty("--scroll",`${C/1e3}`)}},[r]),d=(0,U.useMemo)(()=>o!=="artist"&&!n?4:0,[o,n]);(0,U.useEffect)(()=>{let{current:p}=s;p&&p.style.setProperty("--blur",`${d}px`)},[d]),(0,U.useEffect)(()=>{let p=document.querySelector(At);if(p){let f=()=>l(p);return f(),p.addEventListener("scroll",f,{passive:!0}),()=>{p.removeEventListener("scroll",f)}}},[l]),v("New underMainBackgroundImage:",n);let c=o!=="other"&&t!=="none"?n||(t==="inherit"?i.currentPageArtURL||"":i.nowPlayingArtURL||""):"none",g=`playlist-art-container ${e} ${t}`;return U.default.createElement("span",{id:"playlistArtContainer",className:g,"data-playlist-view-mode":e,ref:a},U.default.createElement("div",{className:"background",ref:s,style:{backgroundImage:`url(${c})`}}),U.default.createElement("div",{className:"overlay",style:{height:"100%",width:"100%",position:"absolute",inset:0}}))},Mo=an;var pe=m(u()),Po=()=>{let e=(0,pe.useRef)(null);(0,pe.useEffect)(()=>{let r=()=>{if(document.getElementById("lucid-under-main-view"))return;let o=document.createElement("div");o.id="lucid-under-main-view",o.className="lucid-under-main-view";let n=document.querySelector(".main-view-container");n&&n.prepend(o),e.current=o,e.current&&Spicetify.ReactDOM.createRoot(e.current).render(pe.default.createElement(Mo,null))};r();let t=Spicetify.Platform.History.listen(()=>{r()});return()=>{t()}},[])};var sn=()=>(v("Render <UnderMainViewManager />"),Po(),ko(),null),Io=sn;var J=m(u()),ln=()=>{let e=(0,J.useRef)(null),[r,t]=(0,J.useState)({}),{windowZoom:o}=_(),{interfaceSettings:{controlSettings:{height:n}}}=S();return(0,J.useEffect)(()=>{let i=()=>{if(te)if(Tt(n),!Ee&&!Dt){let l=n||(We?32:64),d=We?(n/o-Math.min(32/o,n/o))/2:0,c=l/o-d*2;window.document.body.style.setProperty("--top-bar-padding-start",`${(n<=16?8:64)/o}px`),window.document.body.style.setProperty("--top-bar-padding-end",`${(n<=16?8:135)/o}px`);let g={position:"fixed",right:0,top:`${d}px`,height:`${c}px`,width:`${135/o}px`,WebkitBackdropFilter:"brightness(2.12)",backdropFilter:"brightness(2.12)",pointerEvents:"none",zIndex:"var(--above-main-and-now-playing-view-grid-area, 6)"};t(g)}else t({})};i();let a=()=>{i()},s=setTimeout(i,1e3);return window.addEventListener("resize",a),()=>{clearTimeout(s),window.removeEventListener("resize",a)}},[o,n]),J.default.createElement("div",{ref:e,style:r})},xo=ln;var oe=m(u()),cn=(0,oe.memo)(()=>oe.default.createElement(oe.default.Fragment,null,te?oe.default.createElement("div",{id:"transperent-controls-container",style:{containerType:"normal",pointerEvents:"none"}},!Ee&&te?oe.default.createElement(xo,null):null):null)),Lo=cn;var W=m(u()),dn=()=>{let e=(0,W.useRef)({outerWidth:window.outerWidth,innerWidth:window.innerWidth,ratio:window.devicePixelRatio}),{windowZoom:r,setWindowZoom:t}=_(),o=(0,W.useRef)(window.outerWidth),n=(0,W.useRef)(window.innerWidth),i=(0,W.useRef)(window.devicePixelRatio),a=(0,W.useRef)(!0),s=(0,W.useRef)(document.querySelector(".Root__main-view"));return(0,W.useEffect)(()=>{let l=()=>{document.documentElement.style.setProperty("--main-view-height",`${s.current?.clientHeight}px`);let c=window.outerWidth,g=window.innerWidth,p=window.devicePixelRatio;if(a.current||(o.current<=160||i.current!==p)&&(o.current!==c||n.current!==g)){let f=c/g||1;t(f),document.documentElement.style.setProperty("--zoom",`${f}`),v(`Zoom Updated: ${c} / ${g} = ${f}`),o.current=c,n.current=g,i.current=p}},d=()=>{l()};return l(),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[t]),null},Eo=dn;var B=m(u()),pn=()=>(v("Render <MainStateManager />"),B.default.createElement(B.default.Fragment,null,B.default.createElement(vo,null),B.default.createElement(yo,null),B.default.createElement(po,null),B.default.createElement(Eo,null),B.default.createElement(Co,null),B.default.createElement(eo,null),B.default.createElement(oo,null),B.default.createElement(go,null),B.default.createElement(uo,null),B.default.createElement(So,null),B.default.createElement(Io,null),B.default.createElement(Lo,null))),To=pn;function _o(e,r){e.innerHTML=`
    #lucid-main .background-container .background-wrapper div { z-index: ${r} !important; }
  `}function No(e){e.innerHTML=`
    #lucid-main .background-container .background-wrapper div { z-index: -1 !important; }
  `}function Ao(e,r,t,o){let n=!1,i=null,a=new MutationObserver(()=>{let l=e.querySelector(r);l!==i&&(l&&!n?(z(`Applying background z-index: ${o}`),n=!0,_o(t,o)):n&&(z(`Removing background z-index: ${o}`),n=!1,document.querySelector("#lyrics-cinema .lyrics-lyrics-background, #lyrics-cinema .lyrics-lyrics-container")?_o(t,5):No(t)),i=l)}),s={childList:!0};a.observe(e,s),No(t)}var Bo=()=>{let e=document.getElementById("lucid-background-style");e||(e=document.createElement("style"),e.id="lucid-background-style",document.head.appendChild(e));let r=document.querySelector("#lyrics-cinema");r&&Ao(r,"#lyrics-cinema .lyrics-lyrics-background, #lyrics-cinema .lyrics-lyrics-container",e,5);let t=document.querySelector("#main .Root > div:last-child");t&&Ao(t,'.Root div[data-testid="fullscreen-mode-container"], .Root .npv-main-container',e,15)};var Oo=()=>{let{Locale:e}=Spicetify;function r(I){return I.replace(/[{0}{1}«»”“]/g,"").trim()}if(!e)return;let t=e.get("playlist.a11y.play")||"";t=r(t);let o=e.get("playlist.a11y.pause")||"";o=r(o);let n=e.get("play"),i=e.get("pause"),a=e.get("browse"),s=e.get("playback-control.skip-forward"),l=e.get("playback-control.skip-back"),d=e.get("tracklist.a11y.play")||"",c=e.get("view.web-player-home"),g=e.get("upgrade.tooltip.title")||"Upgrade to Premium",p,f;["zh-CN","zh-TW","am","fi"].includes(e.getLocale())?[p,f]=d.split("{1}"):[p,f]=d.split("{0}"),p=r(p),f=r(f);let C=e.get("playback-control.enable-repeat"),y=e.get("playback-control.enable-repeat-one"),M=e.get("playback-control.disable-repeat"),P="lucid_button_styles",h=document.getElementById(P);h||(h=document.createElement("style"),h.id=P,document.head.appendChild(h)),h.innerHTML=`
.Root__globalNav button[aria-label="${g}"],
.Root__globalNav button[title="${g}"] {
  display: none !important;
}

.main-repeatButton-button[aria-checked="false"],
.player-controls__right button[aria-label*="${C}"]  span{
  -webkit-mask-image: var(--repeat-off-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat-off.svg"));
  mask-image: var(--repeat-off-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat-off.svg"));
  background-color: var(--spice-subtext);
  mask-size: contain;
}

.main-repeatButton-button[aria-checked="mixed"],
.player-controls__right button[aria-label*="${M}"] span {
  -webkit-mask-image: var(--repeat-mixed-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat-mixed.svg"));
  mask-image: var(--repeat-mixed-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat-mixed.svg"));
  background-color: var(--spice-accent);
  mask-size: contain;
}

.main-repeatButton-button[aria-checked="true"],
.player-controls__right button[aria-label*="${y}"] span {
  -webkit-mask-image: var(--repeat-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat.svg"));
  mask-image: var(--repeat-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/repeat.svg"));
  background-color: var(--spice-accent);
  mask-size: contain;
}

.player-controls__right button[aria-label*="${M}"] svg,
.player-controls__right button[aria-label*="${C}"] svg {
  transform: scale(1.15);
}

.player-controls__right button[aria-label*="${M}"] svg,
.player-controls__right button[aria-label*="${C}"] svg {
  visibility: hidden;
  opacity: 0;
}

.main-repeatButton-button {
  transform: scale(0.65) !important;
}

.player-controls__right, 
.player-controls__left {
    align-items: center;
}

.player-controls__buttons>button[aria-label*="${n}"] span,
.main-playButton-button[aria-label*="${n}"],
.main-playButton-PlayButton>button[aria-label*="${n}"]{
  background-color: var(--spice-text) !important;
  -webkit-mask-image: var(--play-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/play.svg")) !important;
  mask-image: var(--play-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/play.svg")) !important;
}

.main-playButton-button[aria-label*="${i}"],
.main-playButton-PlayButton>button[aria-label*="${i}"],
.main-playPauseButton-button[aria-label*="${i}"],
.player-controls__buttons>button[aria-label*="${i}"] span {
  background-color: var(--spice-text) !important;
  -webkit-mask-image: var(--pause-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/pause.svg")) !important;
  mask-image: var(--pause-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/pause.svg")) !important;
}

.Root__globalNav button:is([aria-label="Clear search field"]) {
  background-color: transparent !important;
  border: none !important;
}

button[aria-label="${a}"] path {
  display: none !important;
}

button[aria-label="${a}"] svg {
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-image: var(--compass-outline-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/compass-outline.svg"));
  mask-image: var(--compass-outline-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/compass-outline.svg"));
  background-color: var(--spice-subtext) !important;
  scale: 1.25;
}

.main-repeatButton-button[aria-label="${C}"],
.main-repeatButton-button[aria-label="${M}"],
.main-repeatButton-button[aria-label="${y}"],
{
scale: 0.75 !important;
background-color: var(--spice-subtext) !important;
color: var(--spice-subtext);

svg {
  display: none;
}
}

.player-controls__buttons>button[aria-label*="${n}"] span,
.player-controls__buttons>button[aria-label*="${i}"] span{
  display: block;
  mask-size: 100%;
  -webkit-mask-position: center center;
  mask-position: center center;
  background-color: var(--spice-subtext);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: cover;
  mask-size: cover;
  aspect-ratio: 1/1;
}

.main-playPauseButton-button,
.player-controls button[aria-label="${l}"],
.player-controls button[aria-label="${s}"]
{
  display: block;
  mask-size: 100%;
  -webkit-mask-position: center center;
  mask-position: center center;
  background-color: var(--spice-subtext);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: cover;
  mask-size: cover;
  min-height: 1rem;
  min-width: 1rem;
  aspect-ratio: 1/1;
  border-radius: 0 !important;
  border: none !important;
  height: var(--button-size, 24px);
  width: var(--button-size, 24px);
  
  svg,
  span {
    display: none;
    visibility: hidden;
  }
}

.player-controls__buttons>button[aria-label*="${n}"] span svg,
.player-controls__buttons>button[aria-label*="${i}"] span svg {
  display: none;
  visibility: hidden;
}

.player-controls button[aria-label="${l}"] span,
.player-controls button[aria-label="${s}"] span {
  opacity: 0;
}

.player-controls button[aria-label="${l}"] {
  background-color: var(--spice-text);
  -webkit-mask-image: var(--prev-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/prev.svg"));
  mask-image: var(--prev-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/prev.svg"));
}

.player-controls button[aria-label="${s}"] {
  background-color: var(--spice-text);
  -webkit-mask-image: var(--next-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/next.svg"));
  mask-image: var(--next-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/next.svg"));
}

.main-yourLibraryX-navLink[aria-label="${c}"] svg,
button[aria-label="${c}"] svg {
  path {
display: none !important;
  }

  mask-image: var(--home-outline-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/home-outline.svg"));
  -webkit-mask-image: var(--home-outline-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/home-outline.svg"));
  background-color: var(--spice-subtext) !important;
}


.main-yourLibraryX-navLink[aria-label="${c}"].active svg,
.main-globalNav-navLinkActive[aria-label="${c}"] svg {
  path {
display: none !important;
  }

  mask-image: var(--home-filled-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/home-filled.svg"));
  -webkit-mask-image: var(--home-filled-icon, url("https://cdn.jsdelivr.net/gh/sanoojes/Spicetify-Lucid@refs/heads/main/assets/icons/home-filled.svg"));
  background-color: var(--spice-text) !important;
}

.main-yourLibraryX-navLink[aria-label="${c}"].active svg {
  path {
display: none !important;
  }

  background-color: var(--spice-accent) !important;
}

#context-menu ul[aria-label*="Add to playlist menu"] {
  p {
max-width: 10rem;
  }
}

#fs-button svg {
  path {
    display: none !important;
  }
  
  height: 16px;
  width: 16px;
  display: flex;
  background-color: currentColor !important;
  -webkit-mask-image: var(--fullscreen-noarrows-icon, url("https://cdn.jsdelivr.net/gh/OxygenEgg/wild-lucid@main/assets/icons/fullscreen-noarrows.svg"));
  mask-image: var(--fullscreen-noarrows-icon, url("https://cdn.jsdelivr.net/gh/OxygenEgg/wild-lucid@main/assets/icons/fullscreen-noarrows.svg"));
}
`};var F=m(u());var X=m(u()),un=({releases:e,isLoading:r,error:t})=>r?X.default.createElement("div",null,"Loading release data..."):t?X.default.createElement("div",null,"Error fetching release data: ",t.message):e?X.default.createElement("div",{className:"lucid-changelog",id:"lucid-changelog"},e.map(o=>X.default.createElement("div",{key:o.tag_name,className:"release"},X.default.createElement("button",{className:"release-button",type:"button",onClick:()=>window.open(o.html_url,"_blank")},"View on GitHub"),o.body&&X.default.createElement("div",{className:"release-content",dangerouslySetInnerHTML:{__html:o.body}})))):X.default.createElement("div",null,"No release data found."),Do=un;var Ue=m(u()),Ro=(e,r)=>{let[t,o]=(0,Ue.useState)(()=>{if(typeof window<"u"){let n=window.localStorage.getItem(e);return n?JSON.parse(n):r}return r});return(0,Ue.useEffect)(()=>{typeof window<"u"&&window.localStorage.setItem(e,JSON.stringify(t))},[e,t]),[t,o]};async function Uo(e,r,t){try{let o={text:e,context:`${r}/${t}`,mode:"gfm"},n=await fetch("https://api.github.com/markdown",{method:"POST",body:JSON.stringify(o)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.text()}catch(o){return w("Error parsing markdown:",o),null}}var K=m(u()),mn=({currentVersion:e})=>{let[r,t]=K.default.useState({isLoading:!0,error:null,releases:null}),[o,n]=Ro("lucid:previousVersion",null),{closeModal:i,isOpen:a,openModal:s}=Y("changelog"),l=async()=>{v("Fetching release data..."),t(c=>({...c,isLoading:!0}));try{let c=await fetch(Nt||"https://api.github.com/repos/sanoojes/spicetify-lucid/releases");if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);let g=await c.json();v("Fetched release data:",g);let p=await Promise.all(g.map(async C=>({...C,body:await Uo(C.body,"sanoojes","spicetify-lucid")||""})));t({isLoading:!1,error:null,releases:p});let f=g[0].tag_name;(o===null||f!==o)&&(console.log("Opening changelog modal because new version detected"),s())}catch(c){t(g=>({...g,isLoading:!1,error:c instanceof Error?c:new Error("Unknown error")})),w("Error fetching release data:",c)}};K.default.useEffect(()=>{l()},[]);let d=K.default.useCallback(()=>{i();let c=r.releases?.[0]?.tag_name;c&&n(c)},[i,r.releases,n]);return K.default.createElement(K.default.Fragment,null,K.default.createElement(we,{title:"Lucid Changelog",onClose:d,isOpen:a},K.default.createElement(Do,{releases:r.releases,isLoading:r.isLoading,error:r.error,currentVersion:e})))},Fo=mn;var gn=()=>(v("Render <Main />"),(0,F.useEffect)(()=>{Oo(),Bo()},[]),F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{id:"background-container",className:"background-container",style:{containerType:"normal"}},F.default.createElement(Jt,null)),F.default.createElement(Ht,null,F.default.createElement("div",{id:"modal-container",className:"modal-container",style:{containerType:"normal"}},F.default.createElement(Wt,null),F.default.createElement(Fo,null))),F.default.createElement("div",{id:"state"},F.default.createElement(To,null)),F.default.createElement(dt,null))),$o=gn;var Vo=m(u());async function fn(){try{for(;!Spicetify?.showNotification||!Spicetify?.Player||!Spicetify?.React||!Spicetify?.Platform;)await new Promise(r=>setTimeout(r,100));let e=document.getElementById("lucid-main");e||(e=document.createElement("div"),e.id="lucid-main",document.getElementById("main")?.prepend(e)),e&&!e.hasChildNodes()&&Spicetify.ReactDOM.createRoot(e).render(Vo.default.createElement($o,null)),console.log("%c Lucid ignited! \u{1F680}","font-weight: bold; font-size: 1.25rem; color: #2196F3; padding: 0.5rem 0;")}catch(e){Spicetify.showNotification(`[Lucid] Error Occurred: ${e instanceof Error?e.message:e}`,!0),w(e)}}var Ho=fn;(async()=>await Ho())();})();
})();